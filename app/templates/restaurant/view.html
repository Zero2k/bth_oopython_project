{% extends "base.html" %}
{% block content %}
{% include 'layout/page_header.html' %}
{% macro render_field(field, placeholder=None) %}
    {% set css_class = 'uk-input ' + kwargs.pop('class', '') %}
    {{ field(class=css_class, placeholder=placeholder, **kwargs) }}
{% endmacro %}
<div class="uk-container uk-padding" uk-height-viewport="offset-top: true; offset-bottom: true">
    <div class="uk-grid-divider" uk-grid>
        <div class="uk-width-2-3@m">
            <h2>{{ restaurant.name.title() }}</h2>
            <div>
                <ul class="uk-subnav uk-subnav-pill" uk-switcher="animation: uk-animation-fade">
                    <li><a href="#">Overview</a></li>
                    <li><a href="#">Menu</a></li>
                    <li><a href="#">Photos</a></li>
                </ul>
                
                <ul class="uk-switcher uk-margin">
                    <li>
                        <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi.</p>
                    </li>
                    <li>
                        <table class="uk-table uk-table-divider">
                            <thead>
                                <tr>
                                    <th class="uk-table-expand">Food</th>
                                    <th class="uk-width-small">Price</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Mussels "alla Tarantina"</td>
                                    <td>$16.00</td>
                                </tr>
                            </tbody>
                        </table>
                    </li>
                    <li>
                        <div class="uk-child-width-1-3@m" uk-grid uk-lightbox="animation: fade">
                            <div>
                                <a class="uk-inline" href="{{ url_for('static',filename='img/food_alt1.jpg') }}">
                                    <img src="{{ url_for('static',filename='img/food_alt1.jpg') }}" alt="">
                                </a>
                            </div>
                            <div>
                                <a class="uk-inline" href="{{ url_for('static',filename='img/food_alt2.jpg') }}">
                                    <img src="{{ url_for('static',filename='img/food_alt2.jpg') }}" alt="">
                                </a>
                            </div>
                            <div>
                                <a class="uk-inline" href="{{ url_for('static',filename='img/food_alt3.jpg') }}" data-caption="Grilled Lamb Scottadita">
                                    <img src="{{ url_for('static',filename='img/food_alt3.jpg') }}" alt="">
                                </a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>

            <hr>

            <table class="uk-table">
                <caption>All Tables</caption>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Capacity</th>
                        <th>Minimum</th>
                        <th>Availability</th>
                    </tr>
                </thead>
                <tbody>
                    {% for table in restaurant.tables %}
                    <tr>
                        <td>{{ table.name.title() }}</td>
                        <td>{{ table.capacity }}</td>
                        <td>{{ table.minimum }}</td>
                        <td class="uk-table-shrink uk-text-nowrap">
                            {{ 'Booked' if table.check_availability(table.id) else 'Available' }}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="uk-width-1-3@m">
            <div class="uk-card uk-card-default uk-card-body">
                <h3 class="uk-card-title">Make a reservation</h3>
                <form method="POST" action="" accept-charset="UTF-8" role="form" class="uk-form-stacked">
                    {{ form.csrf_token }}
                    <div class="uk-margin">
                        {{ render_field(form.email, placeholder="Email") }}
                        {% for errors in form.errors.email %}
                        <small>
                            {{ errors }}
                        </small>
                        {% endfor %}
                    </div>

                    <div class="uk-margin" uk-grid>
                        <div class="uk-width-1-2@m">
                            <label class="uk-form-label" for="form-stacked-select">People</label>
                            {{ render_field(form.people, placeholder="People") }}
                        </div>
                        <div class="uk-width-1-2@m">
                            <label class="uk-form-label" for="form-stacked-select">Table</label>
                            {{ render_field(form.table, placeholder="Table") }}
                        </div>
                    </div>

                    <!-- {% with messages = get_flashed_messages(with_categories=true) %}
                        {% if messages %}
                        <div>
                        {% for category, message in messages %}
                            {% if category == "error-message" %}
                                {{ message }}<br>
                            {% endif %}
                        {% endfor %}
                        </div>
                        {% endif %}
                    {% endwith %} -->

                    <div class="uk-margin">
                        <button class="uk-button uk-button-primary uk-button-default uk-width-1-1">Reserve</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
